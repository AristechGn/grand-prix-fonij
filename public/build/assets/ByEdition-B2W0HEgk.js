import{r as o,j as e,B as G,W as u}from"./app-DF_WqqkR.js";import{A as U}from"./app-layout-F1lG3ttL.js";import{C as i,a as S,b as F,c as A,d as c}from"./card-CRVOHDNm.js";import{B as p}from"./badge-BHXaZbpq.js";import{B as d}from"./button-CfN-y4e6.js";import{I as W}from"./input-C8usguLH.js";import{S as T,a as B,b as z,c as E,d as h}from"./select-CuV28kXD.js";import{F as R}from"./filter-B_wQBruj.js";import{S as q}from"./search-6Sw0NSzP.js";import{X as D}from"./x-cDVggM2C.js";import{C as L}from"./calendar-CIklMrSP.js";import{F as g}from"./index-CyOC_78t.js";import{U as H}from"./users-DV_kOH7G.js";import{E as O}from"./eye-ng1y5_m4.js";import{A as P}from"./arrow-right-Cszypngj.js";import"./index-BCT9WuBv.js";import"./index-RSN0gAh4.js";import"./index-BhgPs68X.js";import"./createLucideIcon-DyEPuZv4.js";import"./app-logo-icon-BCbcvFnU.js";import"./index-qzzMPmOr.js";import"./check-DwqUslbp.js";function ue({editions:a,filters:m={}}){const[n,f]=o.useState(m.search||""),[l,N]=o.useState(m.status||"all"),[r,v]=o.useState(m.year||"all"),[y,_]=o.useState(m.category||"all"),I={draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",completed:"bg-purple-100 text-purple-800",archived:"bg-amber-100 text-amber-800"},b={draft:"Brouillon",published:"Publié",active:"Actif",completed:"Terminé",archived:"Archivé"},j=a.filter(s=>{const t=!n||s.name.toLowerCase().includes(n.toLowerCase())||s.year.toString().includes(n),Y=!l||l==="all"||s.status===l,k=!r||r==="all"||s.year.toString()===r;return t&&Y&&k}),V=[...new Set(a.map(s=>s.year))].sort((s,t)=>t-s),w=()=>{f(""),N("all"),v("all"),_("all")},x=[n,l!=="all"?l:"",r!=="all"?r:"",y!=="all"?y:""].filter(Boolean).length,C=s=>s?new Date(s).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"Non définie";return e.jsxs(U,{children:[e.jsx(G,{title:"Candidatures par édition"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidatures par édition"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Gérez et consultez les candidatures organisées par édition"})]}),e.jsxs(i,{className:"mb-6",children:[e.jsxs(S,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),"Filtres",x>0&&e.jsxs(p,{variant:"secondary",className:"ml-2",children:[x," actif",x>1?"s":""]})]}),e.jsx(A,{children:"Filtrez les éditions selon vos critères"})]}),e.jsx(c,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Recherche"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(W,{placeholder:"Nom ou année...",className:"pl-10",value:n,onChange:s=>f(s.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Statut"}),e.jsxs(T,{value:l,onValueChange:N,children:[e.jsx(B,{children:e.jsx(z,{placeholder:"Tous les statuts"})}),e.jsxs(E,{children:[e.jsx(h,{value:"all",children:"Tous les statuts"}),Object.entries(b).map(([s,t])=>e.jsx(h,{value:s,children:t},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Année"}),e.jsxs(T,{value:r,onValueChange:v,children:[e.jsx(B,{children:e.jsx(z,{placeholder:"Toutes les années"})}),e.jsxs(E,{children:[e.jsx(h,{value:"all",children:"Toutes les années"}),V.map(s=>e.jsx(h,{value:s.toString(),children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Actions"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(d,{variant:"outline",size:"sm",onClick:w,disabled:x===0,className:"flex-1",children:[e.jsx(D,{className:"h-4 w-4 mr-1"}),"Réinitialiser"]})})]})]})})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(i,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total des éditions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]}),e.jsx(L,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Éditions filtrées"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.length})]}),e.jsx(R,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total candidatures"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.reduce((s,t)=>s+t.applications_count,0)})]}),e.jsx(g,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:j.map(s=>e.jsxs(i,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(S,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(F,{className:"text-lg flex items-center gap-2",children:[e.jsx(L,{className:"h-5 w-5 text-blue-600"}),s.name]}),e.jsxs(A,{className:"mt-1",children:["Édition ",s.year]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(p,{className:I[s.status]||"bg-gray-100",children:b[s.status]||s.status}),s.is_current&&e.jsx(p,{className:"bg-green-100 text-green-800 text-xs",children:"Édition courante"})]})]})}),e.jsx(c,{className:"pt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-slate-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Candidatures"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:s.applications_count})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Début:"}),e.jsx("span",{className:"font-medium",children:C(s.start_date||null)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fin:"}),e.jsx("span",{className:"font-medium",children:C(s.end_date||null)})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(u,{href:route("admin.applications.by-edition.show",s.id),className:"flex-1",children:e.jsxs(d,{className:"w-full",size:"sm",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Voir les candidatures"]})}),e.jsx(u,{href:route("admin.editions.show",s.id),children:e.jsx(d,{variant:"outline",size:"sm",children:e.jsx(P,{className:"h-4 w-4"})})})]})]})})]},s.id))}),j.length===0&&e.jsx(i,{className:"text-center py-12",children:e.jsxs(c,{children:[e.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a.length===0?"Aucune édition trouvée":"Aucune édition ne correspond aux filtres"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a.length===0?"Il n'y a actuellement aucune édition avec des candidatures.":"Essayez de modifier vos critères de recherche ou de réinitialiser les filtres."}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[a.length>0&&e.jsxs(d,{variant:"outline",onClick:w,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Réinitialiser les filtres"]}),e.jsx(u,{href:route("admin.editions.index"),children:e.jsx(d,{children:"Gérer les éditions"})})]})]})})]})})]})}export{ue as default};
