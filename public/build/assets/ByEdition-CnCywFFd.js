import{r as o,j as e,B as G,W as u}from"./app-CFU6F5XP.js";import{A as U}from"./app-layout-Bj4DDnTn.js";import{C as l,a as C,b as S,c as F,d as r}from"./card-C-HdKpJ5.js";import{B as p}from"./badge-B44tzlCr.js";import{B as c}from"./button-Bm-l_rJp.js";import{I as W}from"./input-Al8KkKJd.js";import{S as A,a as T,b as B,c as z,d as h}from"./select-Bea_TPYB.js";import{F as E}from"./filter-B5vEQxDd.js";import{S as q}from"./search-uqc0vRpB.js";import{X as R}from"./x-DAc2hDDk.js";import{C as D}from"./calendar-DP4LUTSi.js";import{F as g}from"./index-Ktyj8OYi.js";import{U as H}from"./users-CTz2bzlY.js";import{E as O}from"./eye-JTSsgLYb.js";import{A as P}from"./arrow-right-DC3jEwAP.js";import"./index-KpWTL4sA.js";import"./index-CoI1VqHy.js";import"./index-y88vJ-62.js";import"./createLucideIcon-BYATUxGo.js";import"./app-logo-icon-BY3mN1a7.js";import"./clock-B5FwJScf.js";import"./circle-check-big-BJ8l4Q0G.js";import"./index-yVIUyc0t.js";import"./check-CFnhftYc.js";function ge({editions:a,filters:n={}}){const[i,f]=o.useState(n.search||""),[d,N]=o.useState(n.status||""),[m,v]=o.useState(n.year||""),[L,_]=o.useState(n.category||""),I={draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",completed:"bg-purple-100 text-purple-800",archived:"bg-amber-100 text-amber-800"},y={draft:"Brouillon",published:"Publié",active:"Actif",completed:"Terminé",archived:"Archivé"},j=a.filter(s=>{const t=!i||s.name.toLowerCase().includes(i.toLowerCase())||s.year.toString().includes(i),Y=!d||s.status===d,k=!m||s.year.toString()===m;return t&&Y&&k}),V=[...new Set(a.map(s=>s.year))].sort((s,t)=>t-s),b=()=>{f(""),N(""),v(""),_("")},x=[i,d,m,L].filter(Boolean).length,w=s=>s?new Date(s).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"Non définie";return e.jsxs(U,{children:[e.jsx(G,{title:"Candidatures par édition"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Candidatures par édition"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Gérez et consultez les candidatures organisées par édition"})]}),e.jsxs(l,{className:"mb-6",children:[e.jsxs(C,{children:[e.jsxs(S,{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5"}),"Filtres",x>0&&e.jsxs(p,{variant:"secondary",className:"ml-2",children:[x," actif",x>1?"s":""]})]}),e.jsx(F,{children:"Filtrez les éditions selon vos critères"})]}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Recherche"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(W,{placeholder:"Nom ou année...",className:"pl-10",value:i,onChange:s=>f(s.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Statut"}),e.jsxs(A,{value:d,onValueChange:N,children:[e.jsx(T,{children:e.jsx(B,{placeholder:"Tous les statuts"})}),e.jsxs(z,{children:[e.jsx(h,{value:"",children:"Tous les statuts"}),Object.entries(y).map(([s,t])=>e.jsx(h,{value:s,children:t},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Année"}),e.jsxs(A,{value:m,onValueChange:v,children:[e.jsx(T,{children:e.jsx(B,{placeholder:"Toutes les années"})}),e.jsxs(z,{children:[e.jsx(h,{value:"",children:"Toutes les années"}),V.map(s=>e.jsx(h,{value:s.toString(),children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Actions"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(c,{variant:"outline",size:"sm",onClick:b,disabled:x===0,className:"flex-1",children:[e.jsx(R,{className:"h-4 w-4 mr-1"}),"Réinitialiser"]})})]})]})})]}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(l,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total des éditions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]}),e.jsx(D,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Éditions filtrées"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.length})]}),e.jsx(E,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(l,{children:e.jsx(r,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total candidatures"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.reduce((s,t)=>s+t.applications_count,0)})]}),e.jsx(g,{className:"h-8 w-8 text-purple-600"})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(s=>e.jsxs(l,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(C,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(S,{className:"text-lg flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5 text-blue-600"}),s.name]}),e.jsxs(F,{className:"mt-1",children:["Édition ",s.year]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(p,{className:I[s.status]||"bg-gray-100",children:y[s.status]||s.status}),s.is_current&&e.jsx(p,{className:"bg-green-100 text-green-800 text-xs",children:"Édition courante"})]})]})}),e.jsx(r,{className:"pt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-slate-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Candidatures"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:s.applications_count})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Début:"}),e.jsx("span",{className:"font-medium",children:w(s.start_date||null)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fin:"}),e.jsx("span",{className:"font-medium",children:w(s.end_date||null)})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(u,{href:route("admin.applications.by-edition.show",s.id),className:"flex-1",children:e.jsxs(c,{className:"w-full",size:"sm",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Voir les candidatures"]})}),e.jsx(u,{href:route("admin.editions.show",s.id),children:e.jsx(c,{variant:"outline",size:"sm",children:e.jsx(P,{className:"h-4 w-4"})})})]})]})})]},s.id))}),j.length===0&&e.jsx(l,{className:"text-center py-12",children:e.jsxs(r,{children:[e.jsx(g,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a.length===0?"Aucune édition trouvée":"Aucune édition ne correspond aux filtres"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a.length===0?"Il n'y a actuellement aucune édition avec des candidatures.":"Essayez de modifier vos critères de recherche ou de réinitialiser les filtres."}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[a.length>0&&e.jsxs(c,{variant:"outline",onClick:b,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Réinitialiser les filtres"]}),e.jsx(u,{href:route("admin.editions.index"),children:e.jsx(c,{children:"Gérer les éditions"})})]})]})})]})})]})}export{ge as default};
