import{r as x,j as e,B as G,W as j}from"./app-DvwYORMh.js";import{A as U}from"./app-layout-nW5gPRKY.js";import{C as d,a as m,b as F,c as A,d as T}from"./card-mcPbQmcC.js";import{B as p}from"./badge-C94mvrLn.js";import{B as i}from"./button-CQQlbXvm.js";import{I as W}from"./input-C_j_ys4p.js";import{S as B,a as z,b as E,c as k,d as h}from"./select-wrnrkMaR.js";import{C as g}from"./calendar-B-VGunfp.js";import{F as R}from"./filter-B5RbTYTL.js";import{X as _}from"./x-XWWRALWT.js";import{S as q}from"./search-C_6AeMJh.js";import{F as b}from"./index-Dmzhg338.js";import{U as H}from"./users-C3_tBJjS.js";import{E as O}from"./eye-Bn1Vixyh.js";import{A as P}from"./arrow-right-BowwfqUo.js";import"./index-XYEWX3qu.js";import"./index-CN9p1dlp.js";import"./index-DYj5555m.js";import"./createLucideIcon-B2K1Nsdj.js";import"./app-logo-icon-BL9Om477.js";import"./index-CYMY4nmV.js";import"./check-DGVItuFN.js";function je({editions:a,filters:o={}}){const[c,f]=x.useState(o.search||""),[t,N]=x.useState(o.status||"all"),[r,w]=x.useState(o.year||"all"),[v,D]=x.useState(o.category||"all"),L={draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",completed:"bg-purple-100 text-purple-800",archived:"bg-amber-100 text-amber-800"},y={draft:"Brouillon",published:"Publié",active:"Actif",completed:"Terminé",archived:"Archivé"},u=a.filter(s=>{const l=!c||s.name.toLowerCase().includes(c.toLowerCase())||s.year.toString().includes(c),I=!t||t==="all"||s.status===t,Y=!r||r==="all"||s.year.toString()===r;return l&&I&&Y}),V=[...new Set(a.map(s=>s.year))].sort((s,l)=>l-s),C=()=>{f(""),N("all"),w("all"),D("all")},n=[c,t!=="all"?t:"",r!=="all"?r:"",v!=="all"?v:""].filter(Boolean).length,S=s=>s?new Date(s).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"Non définie";return e.jsxs(U,{children:[e.jsx(G,{title:"Candidatures par édition"}),e.jsx("div",{className:"py-8 overflow-x-hidden",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full space-y-6",children:[e.jsx(d,{className:"bg-gradient-to-r from-blue-50 via-white to-purple-50 border-none shadow-md",children:e.jsxs(m,{className:"p-6 flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-600 text-white flex items-center justify-center shadow",children:e.jsx(g,{className:"h-6 w-6"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 truncate",children:"Candidatures par édition"}),e.jsx("p",{className:"mt-1 text-gray-600 break-words",children:"Gérez et consultez les candidatures organisées par édition"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-white/80 rounded-xl border border-white/60 p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Total des éditions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.length})]}),e.jsxs("div",{className:"bg-white/80 rounded-xl border border-white/60 p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Candidatures"}),e.jsx("p",{className:"text-2xl font-semibold text-blue-600",children:a.reduce((s,l)=>s+l.applications_count,0)})]}),e.jsxs("div",{className:"bg-white/80 rounded-xl border border-white/60 p-4 shadow-sm",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Éditions actives"}),e.jsx("p",{className:"text-2xl font-semibold text-emerald-600",children:a.filter(s=>s.status==="active").length})]})]})]}),e.jsxs("div",{className:"bg-white/70 rounded-xl border border-white/60 shadow-sm px-4 py-3 text-sm text-gray-600 w-full lg:w-auto",children:["Filtres actifs :"," ",e.jsx("span",{className:"font-semibold",children:n})]})]})}),e.jsxs(d,{className:"mb-6 bg-gradient-to-br from-gray-50 to-white border-none shadow-md",children:[e.jsx(F,{className:"border-b border-white/70",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsxs(A,{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-blue-600"}),"Filtres",n>0&&e.jsxs(p,{variant:"secondary",className:"ml-2 bg-blue-100 text-blue-700",children:[n," actif",n>1?"s":""]})]}),e.jsx(T,{children:"Affinez vos critères de recherche"})]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:C,disabled:n===0,className:"border-gray-200 hover:bg-gray-100",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Réinitialiser"]})]})}),e.jsx(m,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Recherche"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(W,{placeholder:"Nom ou année...",className:"pl-10",value:c,onChange:s=>f(s.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Statut"}),e.jsxs(B,{value:t,onValueChange:N,children:[e.jsx(z,{children:e.jsx(E,{placeholder:"Tous les statuts"})}),e.jsxs(k,{children:[e.jsx(h,{value:"all",children:"Tous les statuts"}),Object.entries(y).map(([s,l])=>e.jsx(h,{value:s,children:l},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Année"}),e.jsxs(B,{value:r,onValueChange:w,children:[e.jsx(z,{children:e.jsx(E,{placeholder:"Toutes les années"})}),e.jsxs(k,{children:[e.jsx(h,{value:"all",children:"Toutes les années"}),V.map(s=>e.jsx(h,{value:s.toString(),children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Actions rapides"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(i,{variant:"secondary",size:"sm",className:"flex-1 bg-blue-600 text-white hover:bg-blue-700",onClick:()=>window.location.href=route("admin.applications.index"),children:"Voir toutes les candidatures"})})]})]})})]}),e.jsx("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[{label:"Total des éditions",value:a.length,icon:e.jsx(g,{className:"h-8 w-8 text-blue-600"}),bg:"from-blue-50 to-white"},{label:"Éditions filtrées",value:u.length,icon:e.jsx(R,{className:"h-8 w-8 text-green-600"}),bg:"from-green-50 to-white"},{label:"Total candidatures",value:a.reduce((s,l)=>s+l.applications_count,0),icon:e.jsx(b,{className:"h-8 w-8 text-purple-600"}),bg:"from-purple-50 to-white"}].map(s=>e.jsx(d,{className:"shadow-sm border border-gray-100",children:e.jsx(m,{className:`p-4 bg-gradient-to-br ${s.bg} rounded-lg`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s.label}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.value})]}),s.icon]})})},s.label))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:u.map(s=>e.jsxs(d,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(F,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs(A,{className:"text-lg flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-blue-600 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.name})]}),e.jsxs(T,{className:"mt-1 break-words",children:["Édition ",s.year]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(p,{className:L[s.status]||"bg-gray-100",children:y[s.status]||s.status}),s.is_current&&e.jsx(p,{className:"bg-green-100 text-green-800 text-xs",children:"Édition courante"})]})]})}),e.jsx(m,{className:"pt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-slate-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Candidatures"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-lg font-bold text-blue-600",children:s.applications_count})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-slate-600",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Début:"}),e.jsx("span",{className:"font-medium",children:S(s.start_date||null)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Fin:"}),e.jsx("span",{className:"font-medium",children:S(s.end_date||null)})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(j,{href:route("admin.applications.by-edition.show",s.id),className:"flex-1",children:e.jsxs(i,{className:"w-full",size:"sm",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Voir les candidatures"]})}),e.jsx(j,{href:route("admin.editions.show",s.id),children:e.jsx(i,{variant:"outline",size:"sm",children:e.jsx(P,{className:"h-4 w-4"})})})]})]})})]},s.id))}),u.length===0&&e.jsx(d,{className:"text-center py-12",children:e.jsxs(m,{children:[e.jsx(b,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:a.length===0?"Aucune édition trouvée":"Aucune édition ne correspond aux filtres"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a.length===0?"Il n'y a actuellement aucune édition avec des candidatures.":"Essayez de modifier vos critères de recherche ou de réinitialiser les filtres."}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[a.length>0&&e.jsxs(i,{variant:"outline",onClick:C,children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Réinitialiser les filtres"]}),e.jsx(j,{href:route("admin.editions.index"),children:e.jsx(i,{children:"Gérer les éditions"})})]})]})})]})})]})}export{je as default};
