import{j as e,B as x,W as h}from"./app-2yzgzxBZ.js";import{A as j}from"./app-layout-CIlu1XJc.js";import{D as p}from"./data-table-DmBHxAA9.js";import{B as r}from"./button-CDA18DXN.js";import{C as i,d as l,a as u,b as g,c as f}from"./card-DDxmbHE3.js";import{A as N}from"./arrow-left-CpYgkEP_.js";import{C as n}from"./calendar-BTYl7GVq.js";import{F as y}from"./index-BEOR5HtZ.js";import{U as b}from"./users-CnVv293D.js";import{D as v}from"./download-DGzRfExW.js";import{E as w}from"./eye-DC0BVEhk.js";import{S as C}from"./square-pen-C_2ToWma.js";import"./app-sidebar-BU60Sh2T.js";import"./index-C32fgW8z.js";import"./index-JAY0tzc9.js";import"./index-CFQm2NCd.js";import"./x-cWV6jO4w.js";import"./createLucideIcon-BaRHjmDo.js";import"./app-logo-icon-BP6XOp1c.js";import"./clock-B440E3jo.js";import"./circle-check-big-BQbpdbmg.js";import"./chevron-right-BczV_3Qe.js";import"./table-CZsYjp0W.js";function Q({edition:a,applications:t,statuses:d}){const c=[{header:"Référence",accessorKey:"application_number"},{header:"Candidat",accessorFn:s=>`${s.first_name} ${s.last_name}`},{header:"Projet",accessorKey:"project_name"},{header:"Catégorie",accessorKey:"category"},{header:"Statut",accessorKey:"status",cell:({row:s})=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o(s.original.status)}`,children:d[s.original.status]})},{header:"Score",accessorKey:"score",cell:({row:s})=>e.jsx("span",{className:"font-mono",children:s.original.score?`${s.original.score}/100`:"-"})},{header:"Date",accessorKey:"submitted_at",cell:({row:s})=>new Date(s.original.submitted_at).toLocaleDateString("fr-FR")},{header:"Actions",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.location.href=route("admin.applications.show",s.original.id),children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.location.href=route("admin.applications.edit",s.original.id),children:e.jsx(C,{className:"h-4 w-4"})})]})}],o=s=>({pending:"bg-yellow-100 text-yellow-800",validated:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",selected:"bg-blue-100 text-blue-800",finalist:"bg-purple-100 text-purple-800",winner:"bg-indigo-100 text-indigo-800"})[s]||"bg-gray-100 text-gray-800",m=()=>{window.location.href=route("admin.applications.export",{edition_id:a.id})};return e.jsxs(j,{children:[e.jsx(x,{title:`Candidatures - ${a.name}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(h,{href:route("admin.applications.by-edition"),children:e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Retour"]})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(n,{className:"h-8 w-8 text-blue-600"}),a.name]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Édition ",a.year," - ",t.total," candidature",t.total>1?"s":""]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx(i,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center mr-4",children:e.jsx(y,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total candidatures"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total})]})]})})}),e.jsx(i,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center mr-4",children:e.jsx(b,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Candidatures validées"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.data.filter(s=>s.status==="validated").length})]})]})})}),e.jsx(i,{children:e.jsx(l,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center mr-4",children:e.jsx(n,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"En attente"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.data.filter(s=>s.status==="pending").length})]})]})})})]}),e.jsxs(i,{children:[e.jsx(u,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(g,{children:["Candidatures de l'édition ",a.name]}),e.jsx(f,{children:"Liste des candidatures soumises pour cette édition"})]}),e.jsxs(r,{onClick:m,children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Exporter"]})]})}),e.jsx(l,{children:e.jsx(p,{columns:c,data:t.data,pagination:{pageIndex:t.current_page-1,pageSize:t.per_page,pageCount:Math.ceil(t.total/t.per_page),total:t.total}})})]})]})})]})}export{Q as default};
