import{r as n,j as e,B as P,W as U}from"./app-CFU6F5XP.js";import{A as q}from"./app-layout-Bj4DDnTn.js";import{D as W}from"./data-table-DVDxyo9t.js";import{B as r}from"./button-Bm-l_rJp.js";import{C as i,d as c,a as _,b as F,c as k}from"./card-C-HdKpJ5.js";import{I as y}from"./input-Al8KkKJd.js";import{B as w}from"./badge-B44tzlCr.js";import{S as T,a as D,b as E,c as R,d as x}from"./select-Bea_TPYB.js";import{A as H}from"./arrow-left-CQzA1g3k.js";import{C as B}from"./calendar-DP4LUTSi.js";import{F as O}from"./index-Ktyj8OYi.js";import{U as M}from"./users-CTz2bzlY.js";import{F as $}from"./filter-B5vEQxDd.js";import{S as X}from"./search-uqc0vRpB.js";import{X as h}from"./x-DAc2hDDk.js";import{D as G}from"./download-BIn6563U.js";import{E as J}from"./eye-JTSsgLYb.js";import{S as Q}from"./square-pen-CkDZ1qFc.js";import"./index-KpWTL4sA.js";import"./index-CoI1VqHy.js";import"./index-y88vJ-62.js";import"./createLucideIcon-BYATUxGo.js";import"./app-logo-icon-BY3mN1a7.js";import"./clock-B5FwJScf.js";import"./circle-check-big-BJ8l4Q0G.js";import"./table-DdUdxDgz.js";import"./index-yVIUyc0t.js";import"./check-CFnhftYc.js";function _e({edition:l,applications:t,statuses:j,categories:A,filters:a}){const[p,u]=n.useState(a.search||""),[o,g]=n.useState(a.status||"all"),[d,f]=n.useState(a.category||"all"),[N,S]=n.useState(a.score_min||""),[b,C]=n.useState(a.score_max||""),K=()=>{const s=new URLSearchParams;p&&s.append("search",p),o&&o!=="all"&&s.append("status",o),d&&d!=="all"&&s.append("category",d),N&&s.append("score_min",N.toString()),b&&s.append("score_max",b.toString()),window.location.href=`${route("admin.applications.by-edition.show",l.id)}?${s.toString()}`},z=()=>{u(""),g("all"),f("all"),S(""),C(""),window.location.href=route("admin.applications.by-edition.show",l.id)},v=s=>t.data.filter(m=>m.status===s).length,L=[{header:"Référence",accessorKey:"application_number"},{header:"Candidat",accessorFn:s=>`${s.first_name} ${s.last_name}`},{header:"Projet",accessorKey:"project_name"},{header:"Catégorie",accessorKey:"category"},{header:"Statut",accessorKey:"status",cell:({row:s})=>e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(s.original.status)}`,children:j[s.original.status]})},{header:"Score",accessorKey:"score",cell:({row:s})=>e.jsx("span",{className:"font-mono",children:s.original.score?`${s.original.score}/100`:"-"})},{header:"Date",accessorKey:"submitted_at",cell:({row:s})=>new Date(s.original.submitted_at).toLocaleDateString("fr-FR")},{header:"Actions",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.location.href=route("admin.applications.show",s.original.id),children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.location.href=route("admin.applications.edit",s.original.id),children:e.jsx(Q,{className:"h-4 w-4"})})]})}],I=s=>({pending:"bg-yellow-100 text-yellow-800",validated:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",selected:"bg-blue-100 text-blue-800",finalist:"bg-purple-100 text-purple-800",winner:"bg-indigo-100 text-indigo-800"})[s]||"bg-gray-100 text-gray-800",V=()=>{window.location.href=route("admin.applications.export",{edition_id:l.id})};return e.jsxs(q,{children:[e.jsx(P,{title:`Candidatures - ${l.name}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(U,{href:route("admin.applications.by-edition"),children:e.jsxs(r,{variant:"outline",size:"sm",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Retour"]})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(B,{className:"h-8 w-8 text-blue-600"}),l.name]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Édition ",l.year," - ",t.total," candidature",t.total>1?"s":""]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx(i,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center mr-4",children:e.jsx(O,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total candidatures"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total})]})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center mr-4",children:e.jsx(M,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Validées"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v("validated")})]})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-yellow-100 flex items-center justify-center mr-4",children:e.jsx(B,{className:"h-6 w-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"En attente"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v("pending")})]})]})})}),e.jsx(i,{children:e.jsx(c,{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center mr-4",children:e.jsx(M,{className:"h-6 w-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Finalistes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v("finalist")})]})]})})})]}),e.jsxs(i,{className:"mb-6",children:[e.jsxs(_,{children:[e.jsxs(F,{className:"flex items-center gap-2",children:[e.jsx($,{className:"h-5 w-5"}),"Filtres"]}),e.jsx(k,{children:"Filtrez les candidatures selon vos critères"})]}),e.jsxs(c,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recherche"}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(y,{placeholder:"Nom, projet, email...",className:"pl-10",value:p,onChange:s=>u(s.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut"}),e.jsxs(T,{value:o,onValueChange:g,children:[e.jsx(D,{children:e.jsx(E,{placeholder:"Tous les statuts"})}),e.jsxs(R,{children:[e.jsx(x,{value:"all",children:"Tous les statuts"}),Object.entries(j).map(([s,m])=>e.jsx(x,{value:s,children:m},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Catégorie"}),e.jsxs(T,{value:d,onValueChange:f,children:[e.jsx(D,{children:e.jsx(E,{placeholder:"Toutes les catégories"})}),e.jsxs(R,{children:[e.jsx(x,{value:"all",children:"Toutes les catégories"}),A.map(s=>e.jsx(x,{value:s,children:s},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Score"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(y,{type:"number",placeholder:"Min",min:"0",max:"100",value:N,onChange:s=>S(s.target.value),className:"w-20"}),e.jsx("span",{className:"flex items-center text-gray-500",children:"-"}),e.jsx(y,{type:"number",placeholder:"Max",min:"0",max:"100",value:b,onChange:s=>C(s.target.value),className:"w-20"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{onClick:K,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Appliquer les filtres"]}),e.jsxs(r,{variant:"outline",onClick:z,children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Réinitialiser"]})]}),e.jsxs("div",{className:"flex gap-2",children:[a.search&&e.jsxs(w,{variant:"secondary",className:"flex items-center gap-1",children:["Recherche: ",a.search,e.jsx(h,{className:"h-3 w-3 cursor-pointer",onClick:()=>u("")})]}),a.status&&e.jsxs(w,{variant:"secondary",className:"flex items-center gap-1",children:["Statut: ",j[a.status],e.jsx(h,{className:"h-3 w-3 cursor-pointer",onClick:()=>g("all")})]}),a.category&&e.jsxs(w,{variant:"secondary",className:"flex items-center gap-1",children:["Catégorie: ",a.category,e.jsx(h,{className:"h-3 w-3 cursor-pointer",onClick:()=>f("all")})]})]})]})]})]}),e.jsxs(i,{children:[e.jsx(_,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(F,{children:["Candidatures de l'édition ",l.name]}),e.jsx(k,{children:"Liste des candidatures soumises pour cette édition"})]}),e.jsxs(r,{onClick:V,children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Exporter"]})]})}),e.jsx(c,{children:e.jsx(W,{columns:L,data:t.data,pagination:{pageIndex:t.current_page-1,pageSize:t.per_page,pageCount:Math.ceil(t.total/t.per_page),total:t.total}})})]})]})})]})}export{_e as default};
