import{r as b,j as e,B as g,W as r}from"./app-2yzgzxBZ.js";import{A as v}from"./app-layout-CIlu1XJc.js";import{T as w,a as y,b as d,c as n,d as C,e as t}from"./table-CZsYjp0W.js";import{B as l}from"./button-CDA18DXN.js";import{B as A}from"./badge-CkvOfC_T.js";import{I as D}from"./input-CRX0TeMU.js";import{D as T,b as P,c as L,d as m,e as S}from"./app-sidebar-BU60Sh2T.js";import{C as B,a as E,b as M,c as R,d as I,e as z}from"./card-DDxmbHE3.js";import{C as H}from"./circle-arrow-left-DfGm3NVK.js";import{C as F}from"./calendar-days-CpDIrvAD.js";import{P as Q}from"./plus-BwqkaIHX.js";import{S as W}from"./search-e2TudRt6.js";import{C as j}from"./calendar-BTYl7GVq.js";import{E as _}from"./eye-DC0BVEhk.js";import{P as $}from"./pencil-DtAaSMSN.js";import{E as O}from"./ellipsis-uhNs5ldk.js";import{T as k}from"./trash-2VYCfm_v.js";import{A as u}from"./arrow-left-CpYgkEP_.js";import"./chevron-right-BczV_3Qe.js";import"./createLucideIcon-BaRHjmDo.js";import"./index-C32fgW8z.js";import"./index-JAY0tzc9.js";import"./index-BEOR5HtZ.js";import"./index-CFQm2NCd.js";import"./x-cWV6jO4w.js";import"./app-logo-icon-BP6XOp1c.js";import"./users-CnVv293D.js";import"./clock-B440E3jo.js";import"./circle-check-big-BQbpdbmg.js";function ge({edition:i,phases:a}){const[c,p]=b.useState(""),f={upcoming:"bg-blue-100 text-blue-800 hover:bg-blue-200",active:"bg-green-100 text-green-800 hover:bg-green-200",completed:"bg-purple-100 text-purple-800 hover:bg-purple-200",cancelled:"bg-red-100 text-red-800 hover:bg-red-200"},N={upcoming:"À venir",active:"En cours",completed:"Terminée",cancelled:"Annulée"},o=Array.isArray(a)?a.filter(s=>{var h;return s.name.toLowerCase().includes(c.toLowerCase())||((h=s.description)==null?void 0:h.toLowerCase().includes(c.toLowerCase()))}):[];console.log("phases",a),console.log("filteredPhases",o);const x=s=>s?new Date(s).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"Non définie";return e.jsxs(v,{children:[e.jsx(g,{title:`Phases de l'édition ${i.name}`}),e.jsx("div",{className:"py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(B,{className:"shadow-lg border-t-4 border-t-blue-500",children:[e.jsx(E,{className:"bg-slate-50 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{href:route("admin.editions.show",i.id),children:e.jsx(l,{variant:"ghost",className:"p-0 hover:bg-transparent",children:e.jsx(H,{className:"h-5 w-5 text-slate-500 mr-2"})})}),e.jsxs("div",{children:[e.jsxs(M,{className:"text-2xl flex items-center",children:[e.jsx(F,{className:"h-6 w-6 mr-2 text-blue-500"}),"Phases de l'édition ",i.name]}),e.jsxs(R,{className:"text-slate-500",children:[a.length," phase",a.length>1?"s":""," au total"]})]})]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(r,{href:route("admin.editions.phases.create",i.id),children:e.jsxs(l,{className:"flex items-center bg-blue-600 hover:bg-blue-700",children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Nouvelle phase"]})})})]})}),e.jsxs(I,{className:"p-6",children:[e.jsx("div",{className:"mb-6 flex items-center",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(D,{placeholder:"Rechercher une phase...",className:"pl-10",value:c,onChange:s=>p(s.target.value)})]})}),e.jsx("div",{className:"rounded-lg border overflow-hidden",children:e.jsxs(w,{children:[e.jsx(y,{children:e.jsxs(d,{className:"bg-slate-50",children:[e.jsx(n,{className:"text-slate-700 font-semibold",children:"Ordre"}),e.jsx(n,{className:"text-slate-700 font-semibold",children:"Phase"}),e.jsx(n,{className:"text-slate-700 font-semibold",children:"Période"}),e.jsx(n,{className:"text-slate-700 font-semibold",children:"Lieu"}),e.jsx(n,{className:"text-slate-700 font-semibold",children:"Statut"}),e.jsx(n,{className:"text-right text-slate-700 font-semibold",children:"Actions"})]})}),e.jsx(C,{children:o.length===0?e.jsx(d,{children:e.jsx(t,{colSpan:6,className:"text-center py-8 text-gray-500",children:c?"Aucune phase ne correspond à votre recherche":"Aucune phase n'a été ajoutée à cette édition"})}):o.map(s=>e.jsxs(d,{className:"hover:bg-slate-50",children:[e.jsx(t,{className:"font-bold text-center",children:s.order}),e.jsx(t,{className:"font-medium",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"font-semibold",children:s.name}),e.jsx("div",{className:"text-sm text-slate-500 line-clamp-1",children:s.description||"Aucune description"})]})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(j,{className:"h-3 w-3 mr-2 text-slate-400"}),"Du ",x(s.start_date)]}),e.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[e.jsx(j,{className:"h-3 w-3 mr-2 text-slate-400"}),"Au ",x(s.end_date)]})]})}),e.jsx(t,{children:e.jsx("span",{className:"text-sm",children:s.location||"Non spécifié"})}),e.jsx(t,{children:e.jsx(A,{className:`${f[s.status]||"bg-gray-100 text-gray-800"}`,children:N[s.status]||s.status})}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(r,{href:route("admin.phases.show",s.id),children:e.jsx(l,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(_,{className:"h-4 w-4"})})}),e.jsx(r,{href:route("admin.phases.edit",s.id),children:e.jsx(l,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx($,{className:"h-4 w-4"})})}),e.jsxs(T,{children:[e.jsx(P,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsxs(L,{align:"end",children:[e.jsx(m,{children:"Monter dans l'ordre"}),e.jsx(m,{children:"Descendre dans l'ordre"}),e.jsx(S,{}),e.jsx(m,{className:"text-red-600",children:e.jsxs(r,{href:route("admin.phases.destroy",s.id),method:"delete",as:"button",className:"w-full text-left flex items-center",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Supprimer"]})})]})]})]})})]},s.id))})]})}),a.length>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Affichage de ",1," à ",a.length," sur ",a.length," phases"]}),e.jsx("div",{className:"flex space-x-1",children:e.jsx(r,{href:route("admin.editions.show",i.id),children:e.jsxs(l,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),"Retour à l'édition"]})})})]})]}),e.jsx(z,{className:"bg-slate-50 border-t p-4",children:e.jsx(r,{href:route("admin.editions.show",i.id),children:e.jsxs(l,{variant:"outline",className:"flex items-center gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),"Retour à l'édition"]})})})]})})})]})}export{ge as default};
