import{r as w,j as e,B as v,W as n,b as y}from"./app-2yzgzxBZ.js";import{A as C}from"./app-layout-CIlu1XJc.js";import{B as c}from"./button-CDA18DXN.js";import{I as T}from"./input-CRX0TeMU.js";import{T as S,a as P,b as u,c as t,d as A,e as l}from"./table-CZsYjp0W.js";import{C as D,a as F,b as L,c as R,d as B}from"./card-DDxmbHE3.js";import{D as E,b as I,c as M,d as h}from"./app-sidebar-BU60Sh2T.js";import{B as U}from"./badge-CkvOfC_T.js";import{t as p}from"./index-BnkVWNzj.js";import{T as m}from"./trophy-DgVoRObA.js";import{P as j}from"./plus-BwqkaIHX.js";import{C as G}from"./coins-BzY14ack.js";import{A as $}from"./x-cWV6jO4w.js";import{S as H}from"./search-e2TudRt6.js";import{E as W}from"./ellipsis-uhNs5ldk.js";import{P as _}from"./pencil-DtAaSMSN.js";import{T as k}from"./trash-2VYCfm_v.js";import"./chevron-right-BczV_3Qe.js";import"./createLucideIcon-BaRHjmDo.js";import"./index-C32fgW8z.js";import"./index-JAY0tzc9.js";import"./index-BEOR5HtZ.js";import"./index-CFQm2NCd.js";import"./app-logo-icon-BP6XOp1c.js";import"./users-CnVv293D.js";import"./calendar-BTYl7GVq.js";import"./clock-B440E3jo.js";import"./circle-check-big-BQbpdbmg.js";function fe({edition:i,prizes:d}){const[a,b]=w.useState(""),o=d.filter(s=>s.name.toLowerCase().includes(a.toLowerCase())||s.description.toLowerCase().includes(a.toLowerCase())||s.type.toLowerCase().includes(a.toLowerCase())),x=(s,r)=>r==="GNF"?new Intl.NumberFormat("fr-FR").format(s)+" GNF":r==="EUR"?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(s):r==="USD"?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s):`${s} ${r}`,f=(s,r)=>{confirm(`Êtes-vous sûr de vouloir supprimer le prix "${r}" ?`)&&y.delete(route("admin.prizes.destroy",s),{onSuccess:()=>{p.success("Prix supprimé avec succès")},onError:()=>{p.error("Une erreur s'est produite lors de la suppression")}})},N=s=>{switch(s){case"main":return"bg-amber-100 text-amber-800 border-amber-200";case"secondary":return"bg-emerald-100 text-emerald-800 border-emerald-200";case"special":return"bg-purple-100 text-purple-800 border-purple-200";case"sponsorship":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},g=s=>{switch(s){case"main":return"Principal";case"secondary":return"Secondaire";case"special":return"Spécial";case"sponsorship":return"Sponsoring";default:return s}};return e.jsxs(C,{children:[e.jsx(v,{title:`Prix - Édition ${i.name}`}),e.jsx("div",{className:"py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(D,{className:"shadow-md",children:[e.jsx(F,{className:"border-b",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs(L,{className:"text-2xl flex items-center",children:[e.jsx(m,{className:"h-6 w-6 mr-2 text-amber-500"}),"Prix de l'édition ",i.name]}),e.jsx(R,{className:"text-slate-500",children:"Gérez les prix à attribuer aux lauréats de cette édition"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{href:route("admin.editions.index"),children:e.jsx(c,{variant:"outline",size:"sm",className:"h-9",children:"Retour aux éditions"})}),e.jsx(n,{href:route("admin.editions.prizes.create",i.id),children:e.jsxs(c,{className:"bg-amber-600 hover:bg-amber-700 h-9 flex items-center gap-1",children:[e.jsx(j,{className:"h-4 w-4"}),"Ajouter un prix"]})})]})]})}),e.jsxs(B,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6",children:[e.jsxs("div",{className:"stats flex flex-wrap gap-4 w-full md:w-auto",children:[e.jsxs("div",{className:"stat bg-amber-50 border border-amber-100 rounded-lg p-3 flex items-center space-x-3",children:[e.jsx("div",{className:"bg-amber-100 p-2 rounded-full",children:e.jsx(m,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Total des prix"}),e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:d.length})]})]}),e.jsxs("div",{className:"stat bg-emerald-50 border border-emerald-100 rounded-lg p-3 flex items-center space-x-3",children:[e.jsx("div",{className:"bg-emerald-100 p-2 rounded-full",children:e.jsx(G,{className:"h-5 w-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Valeur totale"}),e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:x(d.reduce((s,r)=>r.currency==="GNF"?s+r.amount:s,0),"GNF")})]})]}),e.jsxs("div",{className:"stat bg-blue-50 border border-blue-100 rounded-lg p-3 flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 p-2 rounded-full",children:e.jsx($,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-slate-500",children:"Lauréats max"}),e.jsx("div",{className:"text-2xl font-bold text-slate-700",children:d.reduce((s,r)=>s+r.max_winners,0)})]})]})]}),e.jsxs("div",{className:"relative w-full md:w-auto",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(T,{placeholder:"Rechercher un prix...",value:a,onChange:s=>b(s.target.value),className:"pl-9 min-w-[300px]"})]})]}),o.length>0?e.jsx("div",{className:"rounded-md border",children:e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(u,{children:[e.jsx(t,{className:"w-[250px]",children:"Nom"}),e.jsx(t,{children:"Type"}),e.jsx(t,{children:"Montant"}),e.jsx(t,{className:"hidden md:table-cell",children:"Max lauréats"}),e.jsx(t,{className:"text-right",children:"Actions"})]})}),e.jsx(A,{children:o.map(s=>e.jsxs(u,{children:[e.jsxs(l,{className:"font-medium",children:[e.jsx("div",{className:"font-semibold",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-[250px]",children:s.description?s.description:"Aucune description"})]}),e.jsx(l,{children:e.jsx(U,{className:`${N(s.type)} border`,children:g(s.type)})}),e.jsx(l,{children:e.jsx("span",{className:"font-semibold",children:x(s.amount,s.currency)})}),e.jsx(l,{className:"hidden md:table-cell",children:s.max_winners}),e.jsx(l,{className:"text-right",children:e.jsxs(E,{children:[e.jsx(I,{asChild:!0,children:e.jsxs(c,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Ouvrir le menu"}),e.jsx(W,{className:"h-4 w-4"})]})}),e.jsxs(M,{align:"end",children:[e.jsx(n,{href:route("admin.prizes.edit",s.id),children:e.jsxs(h,{className:"cursor-pointer",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Modifier"]})}),e.jsxs(h,{onClick:()=>f(s.id,s.name),className:"cursor-pointer text-red-600 focus:text-red-500",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Supprimer"]})]})]})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-md border",children:[e.jsx(m,{className:"h-12 w-12 mx-auto text-gray-300"}),e.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-700",children:"Aucun prix trouvé"}),e.jsx("p",{className:"mt-1 text-gray-500",children:a?"Aucun résultat ne correspond à votre recherche.":"Cette édition n'a pas encore de prix définis."}),e.jsx("div",{className:"mt-6",children:e.jsx(n,{href:route("admin.editions.prizes.create",i.id),children:e.jsxs(c,{className:"bg-amber-600 hover:bg-amber-700",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Ajouter votre premier prix"]})})})]})]})]})})})]})}export{fe as default};
