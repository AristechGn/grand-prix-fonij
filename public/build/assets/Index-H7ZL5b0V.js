import{r as i,j as t,B as b}from"./app-BPmedaq7.js";import{A as w}from"./app-layout-DWB8u1Gx.js";import{D as C}from"./data-table-CaFxG-zX.js";import{B as o}from"./button-oL1x_6zG.js";import{I as N}from"./input-DYp6BSrN.js";import{S as d}from"./select-ByCGtuhZ.js";import{D as _}from"./download-nxHNFQVX.js";import{S as D}from"./search-4rxR-Wwc.js";import"./index-BnPgndKm.js";import"./index-tp6eDq4y.js";import"./index-CG845gKg.js";import"./createLucideIcon-CDUCEejE.js";import"./index-X2xnqCN_.js";import"./x-CO5k3LV8.js";import"./app-logo-icon-DKQ7RrbY.js";import"./users-D1Cph-7s.js";import"./calendar-EtMaFZNq.js";import"./clock-D4DRDdD3.js";import"./circle-check-big-13SehVYs.js";import"./table-BOhGyfgN.js";import"./index-C_kHr1YT.js";import"./check-KI3Y_Wyu.js";function W({applications:a,editions:h,filters:s,statuses:m}){const[r,u]=i.useState(s.search||""),[n,x]=i.useState(s.edition_id||""),[l,g]=i.useState(s.status||""),[c,j]=i.useState(s.category||""),f=[{header:"Référence",accessorKey:"application_number"},{header:"Candidat",accessorFn:e=>`${e.first_name} ${e.last_name}`},{header:"Projet",accessorKey:"project_name"},{header:"Catégorie",accessorKey:"category"},{header:"Édition",accessorFn:e=>`${e.edition.name} (${e.edition.year})`},{header:"Statut",accessorKey:"status",cell:({row:e})=>t.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${v(e.original.status)}`,children:m[e.original.status]})},{header:"Score",accessorKey:"score",cell:({row:e})=>t.jsx("span",{className:"font-mono",children:e.original.score?`${e.original.score}/100`:"-"})},{header:"Date",accessorKey:"submitted_at",cell:({row:e})=>new Date(e.original.submitted_at).toLocaleDateString("fr-FR")},{header:"Actions",cell:({row:e})=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(o,{variant:"outline",size:"sm",onClick:()=>window.location.href=route("admin.applications.show",e.original.id),children:"Voir"}),t.jsx(o,{variant:"outline",size:"sm",onClick:()=>window.location.href=route("admin.applications.edit",e.original.id),children:"Modifier"})]})}],v=e=>({pending:"bg-yellow-100 text-yellow-800",validated:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",selected:"bg-blue-100 text-blue-800",finalist:"bg-purple-100 text-purple-800",winner:"bg-indigo-100 text-indigo-800"})[e]||"bg-gray-100 text-gray-800",y=()=>{window.location.href=route("admin.applications.index",{search:r,edition_id:n,status:l,category:c})},S=()=>{window.location.href=route("admin.applications.export",{search:r,edition_id:n,status:l,category:c})};return t.jsxs(w,{children:[t.jsx(b,{title:"Gestion des candidatures"}),t.jsx("div",{className:"py-12",children:t.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:t.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Gestion des candidatures"}),t.jsxs(o,{onClick:S,children:[t.jsx(_,{className:"w-4 h-4 mr-2"}),"Exporter"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(N,{type:"text",placeholder:"Rechercher...",value:r,onChange:e=>u(e.target.value),className:"w-full"}),t.jsx(o,{variant:"outline",onClick:y,children:t.jsx(D,{className:"w-4 h-4"})})]}),t.jsxs(d,{value:n,onValueChange:e=>x(e),children:[t.jsx("option",{value:"",children:"Toutes les éditions"}),h.map(e=>t.jsxs("option",{value:e.id,children:[e.name," (",e.year,")"]},e.id))]}),t.jsxs(d,{value:l,onValueChange:e=>g(e),children:[t.jsx("option",{value:"",children:"Tous les statuts"}),Object.entries(m).map(([e,p])=>t.jsx("option",{value:e,children:p},e))]}),t.jsxs(d,{value:c,onValueChange:e=>j(e),children:[t.jsx("option",{value:"",children:"Toutes les catégories"}),t.jsx("option",{value:"tech",children:"Tech"}),t.jsx("option",{value:"agri",children:"Agri"}),t.jsx("option",{value:"social",children:"Social"})]})]}),t.jsx(C,{columns:f,data:a.data,pagination:{pageIndex:a.current_page-1,pageSize:a.per_page,pageCount:Math.ceil(a.total/a.per_page),total:a.total}})]})})})})]})}export{W as default};
