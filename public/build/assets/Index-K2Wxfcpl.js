import{j as e,W as z,r as c,B}from"./app-2yzgzxBZ.js";import{S as D,A}from"./app-sidebar-BU60Sh2T.js";import{B as r}from"./button-CDA18DXN.js";import{M as F}from"./menu-9kBf18Hb.js";import{B as K}from"./bell-DefybJN3.js";import{D as R}from"./data-table-DmBHxAA9.js";import{I}from"./input-CRX0TeMU.js";import{S as m}from"./select-ulqkX7xL.js";import{C as t,d as l,a as j,b as p,c as u}from"./card-DDxmbHE3.js";import{B as f}from"./badge-CkvOfC_T.js";import{F as N}from"./index-BEOR5HtZ.js";import{D as M}from"./download-DGzRfExW.js";import{U as y}from"./users-CnVv293D.js";import{C as v}from"./calendar-BTYl7GVq.js";import{S as $}from"./search-e2TudRt6.js";import{E as L}from"./eye-DC0BVEhk.js";import{S as O}from"./square-pen-C_2ToWma.js";import"./index-C32fgW8z.js";import"./index-JAY0tzc9.js";import"./index-CFQm2NCd.js";import"./x-cWV6jO4w.js";import"./createLucideIcon-BaRHjmDo.js";import"./app-logo-icon-BP6XOp1c.js";import"./clock-B440E3jo.js";import"./circle-check-big-BQbpdbmg.js";import"./table-CZsYjp0W.js";import"./index-DKgpQume.js";import"./check-BkzULSr1.js";function P(){return e.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[e.jsxs("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",children:[e.jsx("span",{className:"sr-only",children:"Ouvrir la barre latérale"}),e.jsx(F,{className:"h-6 w-6","aria-hidden":"true"})]}),e.jsx("div",{className:"h-6 w-px bg-gray-200 lg:hidden","aria-hidden":"true"}),e.jsxs("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:[e.jsx("div",{className:"flex flex-1"}),e.jsxs("div",{className:"flex items-center gap-x-4 lg:gap-x-6",children:[e.jsxs(r,{variant:"ghost",size:"icon",children:[e.jsx("span",{className:"sr-only",children:"Voir les notifications"}),e.jsx(K,{className:"h-6 w-6","aria-hidden":"true"})]}),e.jsx("div",{className:"hidden lg:block lg:h-6 lg:w-px lg:bg-gray-200","aria-hidden":"true"}),e.jsxs(z,{href:route("profile.edit"),className:"flex items-center gap-x-4 lg:gap-x-6",children:[e.jsx("img",{className:"h-8 w-8 rounded-full bg-gray-50",src:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",alt:""}),e.jsx("span",{className:"hidden lg:flex lg:items-center",children:e.jsx("span",{className:"text-sm font-semibold leading-6 text-gray-900","aria-hidden":"true",children:"Tom Cook"})})]})]})]})]})}function W({children:a}){return e.jsx(D,{children:e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(A,{userRole:"admin"}),e.jsxs("div",{className:"lg:pl-72",children:[e.jsx(P,{}),e.jsx("main",{className:"py-10",children:e.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:a})})]})]})})}function Ne({applications:a,editions:b,filters:i,statuses:h}){const[n,w]=c.useState(i.search||""),[d,C]=c.useState(i.edition_id||""),[o,S]=c.useState(i.status||""),[x,_]=c.useState(i.category||""),T=[{header:"Référence",accessorKey:"application_number",cell:({row:s})=>e.jsx("div",{className:"font-mono text-sm text-blue-600",children:s.getValue("application_number")})},{header:"Candidat",accessorFn:s=>`${s.first_name} ${s.last_name}`,cell:({row:s})=>e.jsx("div",{className:"font-medium text-gray-900",children:s.getValue("Candidat")})},{header:"Projet",accessorKey:"project_name",cell:({row:s})=>e.jsx("div",{className:"max-w-[200px] truncate",title:s.getValue("project_name"),children:s.getValue("project_name")})},{header:"Catégorie",accessorKey:"category",cell:({row:s})=>e.jsx(f,{variant:"outline",className:"text-xs",children:s.getValue("category")})},{header:"Édition",accessorFn:s=>`${s.edition.name} (${s.edition.year})`,cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(v,{className:"h-3 w-3"}),s.getValue("Édition")]})},{header:"Statut",accessorKey:"status",cell:({row:s})=>e.jsx(f,{className:V(s.original.status),children:h[s.original.status]})},{header:"Score",accessorKey:"score",cell:({row:s})=>e.jsx("div",{className:"text-center",children:s.original.score?e.jsxs("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:[s.original.score,"/100"]}):e.jsx("span",{className:"text-gray-400",children:"-"})})},{header:"Date",accessorKey:"submitted_at",cell:({row:s})=>e.jsx("div",{className:"text-sm text-gray-600",children:new Date(s.original.submitted_at).toLocaleDateString("fr-FR")})},{header:"Actions",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.location.href=route("admin.applications.show",s.original.id),className:"h-8 w-8 p-0",children:e.jsx(L,{className:"h-4 w-4"})}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>window.location.href=route("admin.applications.edit",s.original.id),className:"h-8 w-8 p-0",children:e.jsx(O,{className:"h-4 w-4"})})]})}],V=s=>({pending:"bg-yellow-100 text-yellow-800",validated:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",selected:"bg-blue-100 text-blue-800",finalist:"bg-purple-100 text-purple-800",winner:"bg-indigo-100 text-indigo-800"})[s]||"bg-gray-100 text-gray-800",E=()=>{window.location.href=route("admin.applications.index",{search:n,edition_id:d,status:o,category:x})},k=()=>{window.location.href=route("admin.applications.export",{search:n,edition_id:d,status:o,category:x})};return e.jsxs(W,{children:[e.jsx(B,{title:"Gestion des candidatures"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(N,{className:"h-8 w-8 text-blue-600"}),"Gestion des candidatures"]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Consultez et gérez toutes les candidatures soumises"})]}),e.jsxs(r,{onClick:k,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(M,{className:"w-4 h-4 mr-2"}),"Exporter"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(t,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:e.jsx(N,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:a.total})]})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center mr-3",children:e.jsx(y,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Validées"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:a.data.filter(s=>s.status==="validated").length})]})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-yellow-100 flex items-center justify-center mr-3",children:e.jsx(v,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"En attente"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:a.data.filter(s=>s.status==="pending").length})]})]})})}),e.jsx(t,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center mr-3",children:e.jsx(y,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Finalistes"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:a.data.filter(s=>s.status==="finalist").length})]})]})})})]}),e.jsxs(t,{className:"mb-6",children:[e.jsxs(j,{children:[e.jsx(p,{className:"text-lg",children:"Filtres de recherche"}),e.jsx(u,{children:"Affinez votre recherche selon vos critères"})]}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Recherche"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{type:"text",placeholder:"Nom, email, projet...",value:n,onChange:s=>w(s.target.value),className:"flex-1"}),e.jsx(r,{variant:"outline",onClick:E,size:"sm",children:e.jsx($,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Édition"}),e.jsxs(m,{value:d,onValueChange:s=>C(s),children:[e.jsx("option",{value:"",children:"Toutes les éditions"}),b.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.year,")"]},s.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Statut"}),e.jsxs(m,{value:o,onValueChange:s=>S(s),children:[e.jsx("option",{value:"",children:"Tous les statuts"}),Object.entries(h).map(([s,g])=>e.jsx("option",{value:s,children:g},s))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catégorie"}),e.jsxs(m,{value:x,onValueChange:s=>_(s),children:[e.jsx("option",{value:"",children:"Toutes les catégories"}),e.jsx("option",{value:"tech",children:"Tech"}),e.jsx("option",{value:"agri",children:"Agri"}),e.jsx("option",{value:"social",children:"Social"})]})]})]})})]}),e.jsxs(t,{children:[e.jsxs(j,{children:[e.jsx(p,{children:"Liste des candidatures"}),e.jsxs(u,{children:[a.total," candidature",a.total>1?"s":""," trouvée",a.total>1?"s":""]})]}),e.jsx(l,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(R,{columns:T,data:a.data,pagination:{pageIndex:a.current_page-1,pageSize:a.per_page,pageCount:Math.ceil(a.total/a.per_page),total:a.total}})})})]})]})})]})}export{Ne as default};
