import{r as i,j as e,B as z}from"./app-Cbu2kkMp.js";import{A as F}from"./app-layout-BqKCciPt.js";import{D as A}from"./data-table-Cmh1J7jt.js";import{B as c}from"./button-ChbHnhGx.js";import{I as B}from"./input-DnOHabyC.js";import{S as m}from"./select-DCm4ivmT.js";import{C as a,d as l,a as u,b as g,c as p}from"./card-CqKD61Iv.js";import{B as f}from"./badge-OPb8LYI7.js";import{F as N}from"./index-Bfiwr-vO.js";import{D as K}from"./download-D0RwUQ-t.js";import{U as v}from"./users-BKWdWJyH.js";import{C as y}from"./calendar-BtzOEuS8.js";import{S as k}from"./search-CEbJ68YH.js";import{E as I}from"./eye-CsNOu1yk.js";import{S as R}from"./square-pen-CFgSblls.js";import"./index-B1o6TpKF.js";import"./index-Cs17BmTR.js";import"./index-D5L3M-DN.js";import"./x-D1MCDg2u.js";import"./createLucideIcon-CvyvGDtA.js";import"./app-logo-icon-BAise0iR.js";import"./clock-B__Chc10.js";import"./circle-check-big-DyutnEEV.js";import"./table-CBTWs4Ib.js";import"./index-Bxs8Fj53.js";import"./check-3gH4khzd.js";function xe({applications:t,editions:b,filters:r,statuses:h}){const[n,w]=i.useState(r.search||""),[d,C]=i.useState(r.edition_id||""),[o,S]=i.useState(r.status||""),[x,_]=i.useState(r.category||""),T=[{header:"Référence",accessorKey:"application_number",cell:({row:s})=>e.jsx("div",{className:"font-mono text-sm text-blue-600",children:s.getValue("application_number")})},{header:"Candidat",accessorFn:s=>`${s.first_name} ${s.last_name}`,cell:({row:s})=>e.jsx("div",{className:"font-medium text-gray-900",children:s.getValue("Candidat")})},{header:"Projet",accessorKey:"project_name",cell:({row:s})=>e.jsx("div",{className:"max-w-[200px] truncate",title:s.getValue("project_name"),children:s.getValue("project_name")})},{header:"Catégorie",accessorKey:"category",cell:({row:s})=>e.jsx(f,{variant:"outline",className:"text-xs",children:s.getValue("category")})},{header:"Édition",accessorFn:s=>`${s.edition.name} (${s.edition.year})`,cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(y,{className:"h-3 w-3"}),s.getValue("Édition")]})},{header:"Statut",accessorKey:"status",cell:({row:s})=>e.jsx(f,{className:V(s.original.status),children:h[s.original.status]})},{header:"Score",accessorKey:"score",cell:({row:s})=>e.jsx("div",{className:"text-center",children:s.original.score?e.jsxs("span",{className:"font-mono text-sm bg-gray-100 px-2 py-1 rounded",children:[s.original.score,"/100"]}):e.jsx("span",{className:"text-gray-400",children:"-"})})},{header:"Date",accessorKey:"submitted_at",cell:({row:s})=>e.jsx("div",{className:"text-sm text-gray-600",children:new Date(s.original.submitted_at).toLocaleDateString("fr-FR")})},{header:"Actions",cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>window.location.href=route("admin.applications.show",s.original.id),className:"h-8 w-8 p-0",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>window.location.href=route("admin.applications.edit",s.original.id),className:"h-8 w-8 p-0",children:e.jsx(R,{className:"h-4 w-4"})})]})}],V=s=>({pending:"bg-yellow-100 text-yellow-800",validated:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",selected:"bg-blue-100 text-blue-800",finalist:"bg-purple-100 text-purple-800",winner:"bg-indigo-100 text-indigo-800"})[s]||"bg-gray-100 text-gray-800",E=()=>{window.location.href=route("admin.applications.index",{search:n,edition_id:d,status:o,category:x})},D=()=>{window.location.href=route("admin.applications.export",{search:n,edition_id:d,status:o,category:x})};return e.jsxs(F,{children:[e.jsx(z,{title:"Gestion des candidatures"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(N,{className:"h-8 w-8 text-blue-600"}),"Gestion des candidatures"]}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Consultez et gérez toutes les candidatures soumises"})]}),e.jsxs(c,{onClick:D,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Exporter"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center mr-3",children:e.jsx(N,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.total})]})]})})}),e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center mr-3",children:e.jsx(v,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Validées"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.data.filter(s=>s.status==="validated").length})]})]})})}),e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-yellow-100 flex items-center justify-center mr-3",children:e.jsx(y,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"En attente"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.data.filter(s=>s.status==="pending").length})]})]})})}),e.jsx(a,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center mr-3",children:e.jsx(v,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Finalistes"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:t.data.filter(s=>s.status==="finalist").length})]})]})})})]}),e.jsxs(a,{className:"mb-6",children:[e.jsxs(u,{children:[e.jsx(g,{className:"text-lg",children:"Filtres de recherche"}),e.jsx(p,{children:"Affinez votre recherche selon vos critères"})]}),e.jsx(l,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Recherche"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{type:"text",placeholder:"Nom, email, projet...",value:n,onChange:s=>w(s.target.value),className:"flex-1"}),e.jsx(c,{variant:"outline",onClick:E,size:"sm",children:e.jsx(k,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Édition"}),e.jsxs(m,{value:d,onValueChange:s=>C(s),children:[e.jsx("option",{value:"",children:"Toutes les éditions"}),b.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.year,")"]},s.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Statut"}),e.jsxs(m,{value:o,onValueChange:s=>S(s),children:[e.jsx("option",{value:"",children:"Tous les statuts"}),Object.entries(h).map(([s,j])=>e.jsx("option",{value:s,children:j},s))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Catégorie"}),e.jsxs(m,{value:x,onValueChange:s=>_(s),children:[e.jsx("option",{value:"",children:"Toutes les catégories"}),e.jsx("option",{value:"tech",children:"Tech"}),e.jsx("option",{value:"agri",children:"Agri"}),e.jsx("option",{value:"social",children:"Social"})]})]})]})})]}),e.jsxs(a,{children:[e.jsxs(u,{children:[e.jsx(g,{children:"Liste des candidatures"}),e.jsxs(p,{children:[t.total," candidature",t.total>1?"s":""," trouvée",t.total>1?"s":""]})]}),e.jsx(l,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsx(A,{columns:T,data:t.data,pagination:{pageIndex:t.current_page-1,pageSize:t.per_page,pageCount:Math.ceil(t.total/t.per_page),total:t.total}})})})]})]})})]})}export{xe as default};
