import{U as E,r as n,b as p,j as e,B as S,W as l}from"./app-BHdtU-jg.js";import{A as D,D as k,a as _,b as R,c as o,d as B}from"./app-layout-DF6-JRv-.js";import{B as i}from"./button-gHGIsv9P.js";import{I as L}from"./input-B0V14bQ4.js";import{B as j}from"./badge-ChmX8Oig.js";import{T as M,a as z,b as x,c,d as F,e as t}from"./table-CGsv427A.js";import{C as H,a as I,b as P,c as W,d as U}from"./card-t-pYRpV3.js";import{A as f}from"./archive-DEeMZ2Jr.js";import{A as N}from"./arrow-left-DEcuI5sp.js";import{S as V}from"./search-Cw246KtF.js";import{C as b}from"./calendar-B5nMNvaE.js";import{F as $}from"./index-CGRYAKMI.js";import{E as g}from"./eye-DDD6Ol0s.js";import{E as q}from"./ellipsis-CasZyagv.js";import{R as G}from"./rotate-ccw-CFahE0om.js";import{T as J}from"./trash-BMbwYtvL.js";import{A as K}from"./arrow-right-3FIfB8HF.js";import"./index-Bt_uVT_d.js";import"./index-B4257H-3.js";import"./index-C-CQccfE.js";import"./x-nG2A5Ktv.js";import"./createLucideIcon-q54nbVAu.js";import"./app-logo-icon-CPaG22hb.js";import"./users-0s4CEyF-.js";const ge=E.memo(function({editions:a}){const[m,v]=n.useState(""),w={draft:"bg-gray-100 text-gray-800",published:"bg-blue-100 text-blue-800",active:"bg-green-100 text-green-800",completed:"bg-purple-100 text-purple-800",archived:"bg-amber-100 text-amber-800"},C={draft:"Brouillon",published:"Publié",active:"Actif",completed:"Terminé",archived:"Archivé"},h=n.useMemo(()=>{if(!m.trim())return a.data;const s=m.toLowerCase();return a.data.filter(r=>{var u;return r.name.toLowerCase().includes(s)||((u=r.description)==null?void 0:u.toLowerCase().includes(s))})},[a.data,m]),y=n.useCallback(s=>{v(s.target.value)},[]),A=n.useCallback(s=>{p.post(route("admin.editions.restore",s),{},{onSuccess:()=>{},onError:r=>{console.error("Erreur lors de la restauration:",r)}})},[]),T=n.useCallback(s=>{confirm("Êtes-vous sûr de vouloir supprimer définitivement cette édition ? Cette action est irréversible.")&&p.delete(route("admin.editions.force-delete",s),{onSuccess:()=>{},onError:r=>{console.error("Erreur lors de la suppression définitive:",r)}})},[]),d=s=>s?new Date(s).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}):"Non définie";return e.jsxs(D,{children:[e.jsx(S,{title:"Éditions supprimées"}),e.jsx("div",{className:"py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(H,{className:"shadow-lg border-t-4 border-t-red-500",children:[e.jsx(I,{className:"bg-slate-50 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(P,{className:"text-2xl flex items-center",children:[e.jsx(f,{className:"h-6 w-6 mr-2 text-red-500"}),"Éditions supprimées"]}),e.jsxs(W,{className:"text-slate-500",children:[a.total," édition",a.total>1?"s":""," supprimée",a.total>1?"s":""]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(l,{href:route("admin.editions.index"),children:e.jsxs(i,{variant:"outline",className:"flex items-center",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Retour aux éditions"]})})})]})}),e.jsxs(U,{className:"p-6",children:[e.jsx("div",{className:"mb-6 flex flex-wrap gap-4 justify-between items-center",children:e.jsxs("div",{className:"relative flex-1 min-w-[250px]",children:[e.jsx(V,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(L,{placeholder:"Rechercher une édition supprimée...",className:"pl-10",value:m,onChange:y})]})}),e.jsx("div",{className:"rounded-lg border overflow-hidden",children:e.jsxs(M,{children:[e.jsx(z,{children:e.jsxs(x,{className:"bg-slate-50",children:[e.jsx(c,{className:"text-slate-700 font-semibold",children:"Édition"}),e.jsx(c,{className:"text-slate-700 font-semibold",children:"Période"}),e.jsx(c,{className:"text-slate-700 font-semibold",children:"Candidatures"}),e.jsx(c,{className:"text-slate-700 font-semibold",children:"Statut"}),e.jsx(c,{className:"text-slate-700 font-semibold",children:"Supprimée le"}),e.jsx(c,{className:"text-right text-slate-700 font-semibold",children:"Actions"})]})}),e.jsx(F,{children:h.length>0?h.map(s=>e.jsxs(x,{className:"hover:bg-slate-50",children:[e.jsx(t,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center text-red-600 font-bold",children:s.year.toString().slice(-2)}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:[s.name,s.is_current&&e.jsx(j,{className:"ml-2 bg-green-100 text-green-800 hover:bg-green-200",children:"Courante"})]}),e.jsxs("div",{className:"text-sm text-slate-500",children:["Année: ",s.year]})]})]})}),e.jsx(t,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(b,{className:"h-3 w-3 mr-2 text-slate-400"}),"Du ",d(s.start_date)]}),e.jsxs("div",{className:"flex items-center text-sm text-slate-500",children:[e.jsx(b,{className:"h-3 w-3 mr-2 text-slate-400"}),"Au ",d(s.end_date)]})]})}),e.jsx(t,{children:e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx($,{className:"h-4 w-4 mr-2 text-blue-500"}),e.jsx("span",{className:"font-medium",children:s.applications_count||0}),e.jsxs("span",{className:"text-slate-500 ml-1",children:["candidature",(s.applications_count||0)>1?"s":""]})]})}),e.jsx(t,{children:e.jsx(j,{className:`${w[s.status]||"bg-gray-100 text-gray-800"}`,children:C[s.status]||s.status})}),e.jsx(t,{children:e.jsx("div",{className:"text-sm",children:d(s.deleted_at)})}),e.jsx(t,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(l,{href:route("admin.editions.show",s.id),children:e.jsx(i,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(g,{className:"h-4 w-4"})})}),e.jsxs(k,{children:[e.jsx(_,{asChild:!0,children:e.jsx(i,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(q,{className:"h-4 w-4"})})}),e.jsxs(R,{align:"end",children:[e.jsx(o,{asChild:!0,children:e.jsxs(l,{href:route("admin.editions.show",s.id),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Voir les détails"]})}),e.jsx(B,{}),e.jsxs(o,{onClick:()=>A(s.id),children:[e.jsx(G,{className:"h-4 w-4 mr-2"}),"Restaurer"]}),e.jsxs(o,{className:"text-red-500",onClick:()=>T(s.id),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Supprimer définitivement"]})]})]})]})})]},s.id)):e.jsx(x,{children:e.jsx(t,{colSpan:6,className:"text-center py-8 text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(f,{className:"h-10 w-10 mb-2"}),e.jsx("h3",{className:"text-lg font-medium",children:"Aucune édition supprimée trouvée"}),e.jsx("p",{className:"max-w-sm mt-1",children:"Aucune édition supprimée ne correspond à vos critères de recherche."})]})})})})]})}),a.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Affichage de ",(a.current_page-1)*a.per_page+1," à ",Math.min(a.current_page*a.per_page,a.total)," sur ",a.total," éditions supprimées"]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(l,{href:a.links[0].url||"#",disabled:!a.links[0].url,children:e.jsx(i,{variant:"outline",size:"sm",disabled:!a.links[0].url,children:e.jsx(N,{className:"h-4 w-4"})})}),a.links.slice(1,-1).map((s,r)=>e.jsx(l,{href:s.url||"#",disabled:!s.url,children:e.jsx(i,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,children:s.label})},r)),e.jsx(l,{href:a.links[a.links.length-1].url||"#",disabled:!a.links[a.links.length-1].url,children:e.jsx(i,{variant:"outline",size:"sm",disabled:!a.links[a.links.length-1].url,children:e.jsx(K,{className:"h-4 w-4"})})})]})]})]})]})})})]})});export{ge as default};
