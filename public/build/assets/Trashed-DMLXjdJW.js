import{r as b,j as e,B as g,W as t}from"./app-BHdtU-jg.js";import{A as w,D as v,a as y,b as C,c as m,d as S}from"./app-layout-DF6-JRv-.js";import{B as r}from"./button-gHGIsv9P.js";import{I as _}from"./input-B0V14bQ4.js";import{B as A}from"./badge-ChmX8Oig.js";import{T,a as D,b as d,c as i,d as R,e as l}from"./table-CGsv427A.js";import{C as B,a as U,b as k,c as L,d as E}from"./card-t-pYRpV3.js";import{A as x}from"./archive-DEeMZ2Jr.js";import{A as h}from"./arrow-left-DEcuI5sp.js";import{S as M}from"./search-Cw246KtF.js";import{E as p}from"./eye-DDD6Ol0s.js";import{E as z}from"./ellipsis-CasZyagv.js";import{R as I}from"./rotate-ccw-CFahE0om.js";import{T as $}from"./trash-BMbwYtvL.js";import{A as H}from"./arrow-right-3FIfB8HF.js";import{U as Q}from"./index-CGRYAKMI.js";import{B as W,S as F}from"./shield-check-2OMBS0Kl.js";import{S as J}from"./shield-DNDvRE4P.js";import"./index-Bt_uVT_d.js";import"./index-B4257H-3.js";import"./index-C-CQccfE.js";import"./x-nG2A5Ktv.js";import"./createLucideIcon-q54nbVAu.js";import"./app-logo-icon-CPaG22hb.js";import"./users-0s4CEyF-.js";import"./calendar-B5nMNvaE.js";function fe({users:a}){const[n,j]=b.useState(""),u={super_admin:"bg-red-100 text-red-800",admin:"bg-blue-100 text-blue-800",jury:"bg-green-100 text-green-800",user:"bg-gray-100 text-gray-800"},f={super_admin:e.jsx(F,{className:"h-3 w-3 mr-1"}),admin:e.jsx(J,{className:"h-3 w-3 mr-1"}),jury:e.jsx(W,{className:"h-3 w-3 mr-1"}),user:e.jsx(Q,{className:"h-3 w-3 mr-1"})},c=a.data.filter(s=>`${s.first_name} ${s.last_name}`.toLowerCase().includes(n.toLowerCase())||s.email.toLowerCase().includes(n.toLowerCase())||s.phone&&s.phone.includes(n)),N=s=>s?new Date(s).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Non spécifié";return e.jsxs(w,{children:[e.jsx(g,{title:"Utilisateurs supprimés"}),e.jsx("div",{className:"py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs(B,{className:"shadow-lg border-t-4 border-t-red-500",children:[e.jsx(U,{className:"bg-slate-50 border-b",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs(k,{className:"text-2xl flex items-center",children:[e.jsx(x,{className:"h-6 w-6 mr-2 text-red-500"}),"Utilisateurs supprimés"]}),e.jsxs(L,{className:"text-slate-500",children:[a.total," utilisateur",a.total>1?"s":""," supprimé",a.total>1?"s":""]})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx(t,{href:route("admin.users.index"),children:e.jsxs(r,{variant:"outline",className:"flex items-center",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Retour aux utilisateurs"]})})})]})}),e.jsxs(E,{className:"p-6",children:[e.jsx("div",{className:"mb-6 flex flex-wrap gap-4 justify-between items-center",children:e.jsxs("div",{className:"relative flex-1 min-w-[250px]",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(_,{placeholder:"Rechercher un utilisateur supprimé...",className:"pl-10",value:n,onChange:s=>j(s.target.value)})]})}),e.jsx("div",{className:"rounded-lg border overflow-hidden",children:e.jsxs(T,{children:[e.jsx(D,{children:e.jsxs(d,{className:"bg-slate-50",children:[e.jsx(i,{className:"text-slate-700 font-semibold",children:"Utilisateur"}),e.jsx(i,{className:"text-slate-700 font-semibold",children:"Contact"}),e.jsx(i,{className:"text-slate-700 font-semibold",children:"Rôle"}),e.jsx(i,{className:"text-slate-700 font-semibold",children:"Supprimé le"}),e.jsx(i,{className:"text-right text-slate-700 font-semibold",children:"Actions"})]})}),e.jsx(R,{children:c.length>0?c.map(s=>e.jsxs(d,{className:"hover:bg-slate-50",children:[e.jsx(l,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"h-10 w-10 rounded-full bg-red-100 flex items-center justify-center text-red-600 font-bold",children:[s.first_name[0],s.last_name[0]]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold",children:[s.first_name," ",s.last_name]}),e.jsxs("div",{className:"text-sm text-slate-500",children:["ID: ",s.id]})]})]})}),e.jsx(l,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm",children:s.email}),e.jsx("div",{className:"text-sm text-slate-500",children:s.phone||"Pas de téléphone"})]})}),e.jsx(l,{children:e.jsxs(A,{className:`${u[s.role]||"bg-gray-100 text-gray-800"} flex items-center`,children:[f[s.role],s.role==="super_admin"?"Super Admin":s.role==="admin"?"Administrateur":s.role==="jury"?"Jury":"Utilisateur"]})}),e.jsx(l,{children:e.jsx("div",{className:"text-sm",children:N(s.deleted_at)})}),e.jsx(l,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(t,{href:route("admin.users.show",s.id),children:e.jsx(r,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(p,{className:"h-4 w-4"})})}),e.jsxs(v,{children:[e.jsx(y,{asChild:!0,children:e.jsx(r,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(z,{className:"h-4 w-4"})})}),e.jsxs(C,{align:"end",children:[e.jsx(m,{asChild:!0,children:e.jsxs(t,{href:route("admin.users.show",s.id),children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Voir le profil"]})}),e.jsx(S,{}),e.jsx(m,{asChild:!0,children:e.jsxs(t,{href:route("admin.users.restore",s.id),method:"post",as:"button",className:"w-full text-left flex items-center",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Restaurer"]})}),e.jsx(m,{asChild:!0,children:e.jsxs(t,{href:route("admin.users.force-delete",s.id),method:"delete",as:"button",className:"text-red-500 w-full text-left flex items-center","data-confirm":"Êtes-vous sûr de vouloir supprimer définitivement cet utilisateur ? Cette action est irréversible.",children:[e.jsx($,{className:"h-4 w-4 mr-2"}),"Supprimer définitivement"]})})]})]})]})})]},s.id)):e.jsx(d,{children:e.jsx(l,{colSpan:5,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-500",children:[e.jsx(x,{className:"h-10 w-10 mb-2"}),e.jsx("h3",{className:"text-lg font-medium",children:"Aucun utilisateur supprimé trouvé"}),e.jsx("p",{className:"max-w-sm mt-1",children:"Aucun utilisateur supprimé ne correspond à vos critères de recherche."})]})})})})]})}),a.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Affichage de ",(a.current_page-1)*a.per_page+1," à ",Math.min(a.current_page*a.per_page,a.total)," sur ",a.total," utilisateurs supprimés"]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx(t,{href:a.links[0].url||"#",disabled:!a.links[0].url,children:e.jsx(r,{variant:"outline",size:"sm",disabled:!a.links[0].url,children:e.jsx(h,{className:"h-4 w-4"})})}),a.links.slice(1,-1).map((s,o)=>e.jsx(t,{href:s.url||"#",disabled:!s.url,children:e.jsx(r,{variant:s.active?"default":"outline",size:"sm",disabled:!s.url,children:s.label})},o)),e.jsx(t,{href:a.links[a.links.length-1].url||"#",disabled:!a.links[a.links.length-1].url,children:e.jsx(r,{variant:"outline",size:"sm",disabled:!a.links[a.links.length-1].url,children:e.jsx(H,{className:"h-4 w-4"})})})]})]})]})]})})})]})}export{fe as default};
